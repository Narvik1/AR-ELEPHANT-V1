<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>AR Anatomi Gajah - Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <style>
    :root{
      --accent:#9ED2A1; /* hijau pastel */
      --accent-dark:#2fae6e;
      --panel-bg: rgba(255,255,255,0.95);
      --glass: rgba(255,255,255,0.85);
      --shadow: 0 6px 18px rgba(0,0,0,0.12);
      --radius: 12px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body { margin:0; height:100%; background:#eef7ef; }
    /* UI layer */
    #ui-root{ position: absolute; inset:0; pointer-events:none; display:flex; flex-direction:column; justify-content:space-between; }
    .topbar { display:flex; justify-content:flex-end; gap:10px; padding:12px; pointer-events:auto; }
    .panel { background:var(--panel-bg); border-radius:var(--radius); box-shadow:var(--shadow); padding:8px; pointer-events:auto; }
    .btn { background:var(--accent); border:none; color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600; }
    .btn-ghost { background:transparent; border:1px solid rgba(0,0,0,0.06); color:#333; padding:6px 10px; border-radius:8px; }
    .mode-row{ display:flex; gap:8px; align-items:center; }
    #placeBtn { position:absolute; left:50%; transform:translateX(-50%); bottom:88px; pointer-events:auto; }
    #controls { display:flex; gap:12px; align-items:center; padding:10px 14px; }
    .range { width:180px; }
    #tooltip { position:absolute; left:50%; transform:translateX(-50%); bottom:160px; min-width:180px; max-width:320px; display:none; pointer-events:auto; }
    #detailModal { position:absolute; left:50%; transform:translateX(-50%); bottom:30px; width:92%; max-width:520px; display:none; pointer-events:auto; }
    .title { font-weight:700; margin-bottom:6px; color:#173B2D; }
    .small { font-size:13px; color:#333; }
    /* mode buttons style */
    .mode-btn { background:linear-gradient(180deg,var(--accent),var(--accent-dark)); padding:8px 12px; border-radius:10px; color:#fff; font-weight:700; border:none; cursor:pointer;}
    /* responsive */
    @media(min-width:900px){
      #placeBtn { bottom:120px; }
    }
  </style>
</head>
<body>
  <div id="ui-root">
    <div class="topbar" style="justify-content:space-between;">
      <div style="display:flex;align-items:center;gap:8px;pointer-events:auto;">
        <div class="panel" style="display:flex;gap:8px;align-items:center;">
          <button id="btnBody" class="mode-btn">Tubuh</button>
          <button id="btnSkeleton" class="mode-btn">Tulang</button>
          <button id="btnOrgans" class="mode-btn">Organ</button>
        </div>
      </div>
      <div style="pointer-events:auto;">
        <div class="panel">
          <button id="enterBtn" class="btn">Enter AR</button>
        </div>
      </div>
    </div>

    <div style="display:flex;justify-content:center;align-items:center;">
      <div id="tooltip" class="panel"></div>
    </div>

    <div style="display:flex;justify-content:center;align-items:center;">
      <div id="placeBtn" class="panel" style="display:none;">
        <button id="placeModel" class="btn">Place Model</button>
      </div>
    </div>

    <div style="display:flex;justify-content:center;padding:12px;">
      <div id="controls" class="panel" style="display:none;">
        <div style="display:flex;flex-direction:column;gap:6px;">
          <div class="title small">Scale</div>
          <input id="scaleRange" class="range" type="range" min="0.3" max="2.0" step="0.01" value="1">
        </div>
        <div style="display:flex;flex-direction:column;gap:6px;">
          <div class="title small">Rotate</div>
          <input id="rotateRange" class="range" type="range" min="0" max="360" step="1" value="0">
        </div>
        <div style="display:flex;flex-direction:column;gap:6px;align-items:center;">
          <div class="title small">Layer</div>
          <button id="toggleSkeletonSmall" class="btn-ghost">Toggle Skeleton</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Detail modal -->
  <div id="detailModal" class="panel"></div>

  <!-- A-Frame scene -->
  <a-scene embedded vr-mode-ui="enabled: false" renderer="logarithmicDepthBuffer: true" xrweb>
    <a-entity id="camera" camera position="0 1.6 0"></a-entity>

    <!-- Reticle -->
    <a-entity id="reticle" visible="false">
      <a-ring color="#00FFAA" radius-inner="0.04" radius-outer="0.06" rotation="-90 0 0"></a-ring>
    </a-entity>

    <!-- Model root -->
    <a-entity id="modelRoot" visible="false">
      <a-entity id="layer_body" gltf-model="assets/models/gajah.glb" visible="true" position="0 0 0" scale="1 1 1"></a-entity>
      <a-entity id="layer_skeleton" gltf-model="assets/models/tulang_gajah.glb" visible="false" position="0 0 0" scale="1 1 1"></a-entity>

      <a-entity id="layer_organs" visible="false">
        <!-- load organ models as separate children for raycast -->
        <a-entity id="organ_heart" gltf-model="assets/models/jantung.glb" visible="true" position="0 0 0" scale="1 1 1"></a-entity>
        <!-- <a-entity id="organ_lungs" gltf-model="assets/models/organs/lungs.glb" visible="true" position="0 0 0" scale="1 1 1"></a-entity> -->
        <!-- <a-entity id="organ_brain" gltf-model="assets/models/organs/brain.glb" visible="true" position="0 0 0" scale="1 1 1"></a-entity> -->
      </a-entity>
    </a-entity>

    <a-entity light="type: ambient; intensity: 0.9"></a-entity>
    <a-entity light="type: directional; intensity: 0.6" position="1 1 0"></a-entity>
  </a-scene>

  <script src="src/app.js"></script>
</body>
</html>
